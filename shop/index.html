<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ShopRight Seller Storefront</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Inter', sans-serif;
    }
    
    @keyframes fadeInUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes fadeInLeft {
      from { transform: translateX(-50px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes fadeInRight {
      from { transform: translateX(50px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes subtleFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }
    @keyframes gentlePulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    @keyframes morphGlow {
      0%, 100% { box-shadow: 0 0 20px rgba(100, 116, 139, 0.15); }
      50% { box-shadow: 0 0 40px rgba(100, 116, 139, 0.25); }
    }
    @keyframes loaderSpin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes loaderPulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.7; }
    }
    @keyframes dotWave {
      0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }
    @keyframes slideUp {
      from { transform: translateY(100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .fade-up { animation: fadeInUp 1s ease-out; }
    .fade-left { animation: fadeInLeft 1s ease-out; }
    .fade-right { animation: fadeInRight 1s ease-out; }
    .slide-up { animation: slideUp 0.8s ease-out; }
    .float { animation: subtleFloat 4s ease-in-out infinite; }
    .pulse { animation: gentlePulse 3s ease-in-out infinite; }
    .rotate { animation: rotate 20s linear infinite; }
    .morph-glow { animation: morphGlow 4s ease-in-out infinite; }
    .loader-spin { animation: loaderSpin 1s linear infinite; }
    .loader-pulse { animation: loaderPulse 2s ease-in-out infinite; }
    
    .minimal-gradient {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
    }
    .maintenance-gradient {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 50%, #cbd5e1 100%);
    }
    .coming-gradient {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
    }
    
    .glass {
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      background: rgba(248, 250, 252, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.2);
    }
    
    .minimal-shadow {
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
    }
    
    .hover-lift {
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }
    .hover-lift:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 35px 70px -15px rgba(0, 0, 0, 0.1);
    }

    .shimmer-effect::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.1), transparent);
      animation: shimmer 3s infinite;
    }

    .text-gradient {
      background: linear-gradient(135deg, #334155 0%, #64748b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Loader Styles */
    .loader-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .loader-container.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .loader-content {
      text-align: center;
    }

    .loader-ring {
      width: 80px;
      height: 80px;
      border: 3px solid rgba(148, 163, 184, 0.2);
      border-top: 3px solid #64748b;
      border-radius: 50%;
      margin: 0 auto 30px;
      animation: loaderSpin 1s linear infinite;
    }

    .loader-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 20px 0;
    }

    .loader-dot {
      width: 8px;
      height: 8px;
      background: #64748b;
      border-radius: 50%;
      animation: dotWave 1.4s ease-in-out infinite;
    }

    .loader-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .loader-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    .progress-bar {
      width: 200px;
      height: 2px;
      background: rgba(148, 163, 184, 0.3);
      border-radius: 1px;
      overflow: hidden;
      margin: 20px auto;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #64748b, #94a3b8);
      border-radius: 1px;
      width: 0%;
      animation: progressFill 3s ease-in-out;
    }

    @keyframes progressFill {
      0% { width: 0%; }
      20% { width: 30%; }
      60% { width: 70%; }
      100% { width: 100%; }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 transition-all duration-300">

  <!-- Loader -->
  <div id="loader" class="loader-container">
    <div class="loader-content">
      <div class="loader-ring"></div>
      <div class="loader-dots">
        <div class="loader-dot"></div>
        <div class="loader-dot"></div>
        <div class="loader-dot"></div>
      </div>
      <h2 class="text-2xl font-light text-slate-600 mb-2">Loading StoreFront</h2>
      <p class="text-slate-400 text-sm mb-4">Preparing your shopping experience</p>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
      <p class="text-xs text-slate-300 mt-4">Please wait while we set everything up</p>
    </div>
  </div>

  <div id="layoutContainer" class="min-h-screen"></div>

  <script>
    const API = "http://10.2.0.2:3000";
    const sellerParam = new URLSearchParams(location.search).get("seller");
    const currentUser = JSON.parse(localStorage.getItem("user") || "{}");
    const isOwner = currentUser?.role && currentUser.role.startsWith("seller") && currentUser.username === sellerParam;

    const ErrorPages = {
      shopNotFound: (sellerName) => `
        <div class="min-h-screen minimal-gradient flex items-center justify-center px-6 py-16">
          <div class="max-w-7xl mx-auto text-center">
            <div class="glass rounded-3xl p-20 minimal-shadow fade-up">
              <div class="w-32 h-32 mx-auto mb-12 bg-slate-100 rounded-full flex items-center justify-center float morph-glow">
                <svg class="w-16 h-16 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                </svg>
              </div>
              
              <h1 class="text-6xl font-light text-gradient mb-8 fade-left">Shop Doesn't Exist</h1>
              <p class="text-2xl text-slate-600 mb-6 font-light fade-right">The merchant "${sellerName}" hasn't joined our network yet</p>
              <p class="text-lg text-slate-500 mb-20 font-light max-w-2xl mx-auto">Don't worry though - thousands of verified sellers are waiting to serve you with authentic products, fast shipping, and excellent customer service.</p>
              
              <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
                <div class="glass rounded-xl p-8 hover-lift shimmer-effect relative overflow-hidden" style="animation-delay: 0.1s;">
                  <div class="w-16 h-16 mx-auto mb-6 bg-slate-100 rounded-lg flex items-center justify-center">
                    <svg class="w-8 h-8 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                    </svg>
                  </div>
                  <h3 class="text-xl font-semibold text-slate-700 mb-4">Verified Excellence</h3>
                  <p class="text-slate-600 text-sm leading-relaxed mb-4">Every seller undergoes verification including business registration, product authenticity checks, and service standards.</p>
                  <div class="space-y-2 text-xs text-slate-500">
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>Background verification</span>
                    </div>
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>Product quality assurance</span>
                    </div>
                  </div>
                </div>
                
                <div class="glass rounded-xl p-8 hover-lift shimmer-effect relative overflow-hidden" style="animation-delay: 0.2s;">
                  <div class="w-16 h-16 mx-auto mb-6 bg-slate-100 rounded-lg flex items-center justify-center">
                    <svg class="w-8 h-8 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                  </div>
                  <h3 class="text-xl font-semibold text-slate-700 mb-4">Fast Delivery</h3>
                  <p class="text-slate-600 text-sm leading-relaxed mb-4">Reliable logistics network ensuring your orders reach you quickly with real-time tracking.</p>
                  <div class="space-y-2 text-xs text-slate-500">
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>Same-day delivery available</span>
                    </div>
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>Real-time tracking</span>
                    </div>
                  </div>
                </div>
                
                <div class="glass rounded-xl p-8 hover-lift shimmer-effect relative overflow-hidden" style="animation-delay: 0.3s;">
                  <div class="w-16 h-16 mx-auto mb-6 bg-slate-100 rounded-lg flex items-center justify-center">
                    <svg class="w-8 h-8 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                    </svg>
                  </div>
                  <h3 class="text-xl font-semibold text-slate-700 mb-4">Secure Shopping</h3>
                  <p class="text-slate-600 text-sm leading-relaxed mb-4">Your transactions are protected by encryption and comprehensive buyer protection policies.</p>
                  <div class="space-y-2 text-xs text-slate-500">
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>SSL encryption</span>
                    </div>
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>Buyer guarantee</span>
                    </div>
                  </div>
                </div>
                
                <div class="glass rounded-xl p-8 hover-lift shimmer-effect relative overflow-hidden" style="animation-delay: 0.4s;">
                  <div class="w-16 h-16 mx-auto mb-6 bg-slate-100 rounded-lg flex items-center justify-center">
                    <svg class="w-8 h-8 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                  </div>
                  <h3 class="text-xl font-semibold text-slate-700 mb-4">Global Marketplace</h3>
                  <p class="text-slate-600 text-sm leading-relaxed mb-4">Connect with sellers worldwide, accessing unique products and exclusive deals.</p>
                  <div class="space-y-2 text-xs text-slate-500">
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>180+ countries served</span>
                    </div>
                    <div class="flex items-center space-x-2">
                      <div class="w-1.5 h-1.5 bg-slate-400 rounded-full"></div>
                      <span>Multi-currency support</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="glass rounded-xl p-10 text-left fade-left">
                  <h3 class="text-2xl font-semibold text-slate-700 mb-6">Quality Experience</h3>
                  <p class="text-slate-600 mb-6">Join millions of satisfied customers who've discovered shopping the way it should be - simple, secure, and reliable.</p>
                  <div class="text-3xl font-bold text-slate-700 mb-2">4.9â˜…</div>
                  <div class="text-slate-500 text-sm">Average seller rating</div>
                </div>
                
                <div class="glass rounded-xl p-10 text-left">
                  <h3 class="text-2xl font-semibold text-slate-700 mb-6">Customer Support</h3>
                  <p class="text-slate-600 mb-6">Get help when you need it with our dedicated customer service team available around the clock.</p>
                  <div class="text-3xl font-bold text-slate-700 mb-2">24/7</div>
                  <div class="text-slate-500 text-sm">Customer support</div>
                </div>
                
                <div class="glass rounded-xl p-10 text-left fade-right">
                  <h3 class="text-2xl font-semibold text-slate-700 mb-6">Wide Selection</h3>
                  <p class="text-slate-600 mb-6">Browse millions of products from trusted sellers with competitive pricing and quality guarantees.</p>
                  <div class="text-3xl font-bold text-slate-700 mb-2">50M+</div>
                  <div class="text-slate-500 text-sm">Products available</div>
                </div>
              </div>
              
              <div class="text-slate-500 text-lg">
                Discover what shopping should be - <span class="text-slate-700 font-medium">start exploring</span>
              </div>
            </div>
          </div>
        </div>
      `,

      maintenanceMode: () => `
        <div class="min-h-screen maintenance-gradient flex items-center justify-center px-6 py-16">
          <div class="max-w-6xl mx-auto text-center">
            <div class="fade-up">
              <div class="w-40 h-40 mx-auto mb-16 relative">
                <div class="rotate">
                  <svg viewBox="0 0 100 100" class="w-full h-full text-slate-300">
                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="2"/>
                    <circle cx="50" cy="50" r="35" fill="none" stroke="currentColor" stroke-width="1"/>
                    <circle cx="50" cy="50" r="25" fill="none" stroke="currentColor" stroke-width="1"/>
                    <circle cx="50" cy="50" r="15" fill="none" stroke="currentColor" stroke-width="1"/>
                  </svg>
                </div>
                <div class="absolute inset-0 flex items-center justify-center">
                  <svg class="w-12 h-12 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                </div>
              </div>
              
              <h1 class="text-6xl font-light text-gradient mb-8 fade-left">System Maintenance</h1>
              <p class="text-2xl text-slate-600 mb-6 font-light fade-right">We're improving your shopping experience</p>
              <p class="text-lg text-slate-500 mb-20 font-light max-w-3xl mx-auto">Our team is implementing updates to deliver better performance, enhanced security, and new features.</p>
              
              <div class="glass rounded-2xl p-16 mb-16 minimal-shadow">
                <div class="grid lg:grid-cols-2 gap-16 items-center">
                  <div class="text-left space-y-8">
                    <h2 class="text-3xl font-semibold text-slate-700">Update Progress</h2>
                    <div class="space-y-6">
                      <div class="flex items-center space-x-6">
                        <div class="w-3 h-3 bg-slate-400 rounded-full pulse morph-glow"></div>
                        <div class="flex-1">
                          <div class="text-slate-700 font-medium mb-1">Server Infrastructure</div>
                          <div class="text-slate-500 text-sm">Optimizing cloud architecture for faster response times</div>
                          <div class="w-full bg-slate-200 rounded-full h-2 mt-2">
                            <div class="bg-slate-500 h-2 rounded-full w-4/5"></div>
                          </div>
                        </div>
                      </div>
                      <div class="flex items-center space-x-6">
                        <div class="w-3 h-3 bg-slate-400 rounded-full pulse morph-glow" style="animation-delay: 0.5s;"></div>
                        <div class="flex-1">
                          <div class="text-slate-700 font-medium mb-1">Security Protocols</div>
                          <div class="text-slate-500 text-sm">Implementing enhanced encryption systems</div>
                          <div class="w-full bg-slate-200 rounded-full h-2 mt-2">
                            <div class="bg-slate-500 h-2 rounded-full w-3/4"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="space-y-8">
                    <div class="glass rounded-xl p-8 text-center morph-glow">
                      <div class="w-20 h-20 mx-auto mb-6 bg-slate-100 rounded-full flex items-center justify-center">
                        <svg class="w-10 h-10 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                      </div>
                      <p class="text-slate-600 mb-4 text-lg">Estimated completion</p>
                      <p class="text-4xl font-light text-slate-700 mb-2">15-30</p>
                      <p class="text-slate-500">minutes remaining</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="text-slate-500 text-lg">
                Thank you for your patience - <span class="text-slate-700 font-medium">we'll be back soon</span>
              </div>
            </div>
          </div>
        </div>
      `,

      noLayout: (sellerName) => `
        <div class="min-h-screen coming-gradient flex items-center justify-center px-6 py-16">
          <div class="max-w-7xl mx-auto text-center">
            <div class="fade-up">
              <div class="w-32 h-32 mx-auto mb-12 bg-slate-100 rounded-full flex items-center justify-center float morph-glow">
                <svg class="w-16 h-16 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a4 4 0 004-4V5z"></path>
                </svg>
              </div>
              
              <h1 class="text-6xl font-light text-gradient mb-8 fade-left">Storefront Coming Soon</h1>
              <p class="text-2xl text-slate-600 mb-6 font-light fade-right">${sellerName} is preparing their digital store</p>
              <p class="text-lg text-slate-500 mb-20 font-light max-w-4xl mx-auto">A dedicated team is crafting a shopping experience that will showcase products beautifully and make purchasing simple and secure.</p>
              
              <div class="glass rounded-2xl p-16 mb-20 minimal-shadow">
                <h2 class="text-3xl font-semibold text-slate-700 mb-16">What's Being Built</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
                  <div class="text-center hover-lift shimmer-effect relative overflow-hidden">
                    <div class="w-20 h-20 mx-auto mb-8 bg-slate-100 rounded-xl flex items-center justify-center morph-glow">
                      <svg class="w-10 h-10 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                      </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-slate-700 mb-4">Clean Design</h3>
                    <p class="text-slate-600 text-sm mb-4">A beautiful, minimalist interface that puts products first and makes shopping effortless.</p>
                  </div>
                  
                  <div class="text-center hover-lift shimmer-effect relative overflow-hidden">
                    <div class="w-20 h-20 mx-auto mb-8 bg-slate-100 rounded-xl flex items-center justify-center morph-glow">
                      <svg class="w-10 h-10 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                      </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-slate-700 mb-4">Mobile First</h3>
                    <p class="text-slate-600 text-sm mb-4">Optimized for all devices with smooth performance on phones, tablets, and desktops.</p>
                  </div>
                  
                  <div class="text-center hover-lift shimmer-effect relative overflow-hidden">
                    <div class="w-20 h-20 mx-auto mb-8 bg-slate-100 rounded-xl flex items-center justify-center morph-glow">
                      <svg class="w-10 h-10 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                      </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-slate-700 mb-4">Secure Shopping</h3>
                    <p class="text-slate-600 text-sm mb-4">Protected checkout with multiple payment options and buyer protection policies.</p>
                  </div>
                </div>
              </div>
              
              <div class="grid md:grid-cols-2 gap-12 mb-20">
                <div class="glass rounded-xl p-12 text-left fade-left">
                  <h3 class="text-2xl font-semibold text-slate-700 mb-8">Development Progress</h3>
                  <div class="space-y-6">
                    <div>
                      <div class="flex items-center justify-between mb-3">
                        <span class="text-slate-700 font-medium">Design System</span>
                        <span class="text-slate-500 text-sm">85%</span>
                      </div>
                      <div class="w-full bg-slate-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-slate-400 to-slate-500 h-3 rounded-full w-[85%]"></div>
                      </div>
                    </div>
                    
                    <div>
                      <div class="flex items-center justify-between mb-3">
                        <span class="text-slate-700 font-medium">Product Catalog</span>
                        <span class="text-slate-500 text-sm">70%</span>
                      </div>
                      <div class="w-full bg-slate-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-slate-400 to-slate-500 h-3 rounded-full w-[70%]"></div>
                      </div>
                    </div>
                    
                    <div>
                      <div class="flex items-center justify-between mb-3">
                        <span class="text-slate-700 font-medium">Checkout System</span>
                        <span class="text-slate-500 text-sm">60%</span>
                      </div>
                      <div class="w-full bg-slate-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-slate-400 to-slate-500 h-3 rounded-full w-[60%]"></div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="glass rounded-xl p-12 fade-right">
                  <h3 class="text-2xl font-semibold text-slate-700 mb-8">Key Features</h3>
                  <div class="space-y-6">
                    <div class="flex items-start space-x-4">
                      <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                        <svg class="w-4 h-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4"></path>
                        </svg>
                      </div>
                      <div>
                        <h4 class="text-slate-700 font-semibold mb-1">Fast Search</h4>
                        <p class="text-slate-500 text-sm">Quick product discovery with smart filters and sorting options.</p>
                      </div>
                    </div>
                    
                    <div class="flex items-start space-x-4">
                      <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                        <svg class="w-4 h-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4"></path>
                        </svg>
                      </div>
                      <div>
                        <h4 class="text-slate-700 font-semibold mb-1">Easy Checkout</h4>
                        <p class="text-slate-500 text-sm">Streamlined purchase process with guest checkout options.</p>
                      </div>
                    </div>
                    
                    <div class="flex items-start space-x-4">
                      <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                        <svg class="w-4 h-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4"></path>
                        </svg>
                      </div>
                      <div>
                        <h4 class="text-slate-700 font-semibold mb-1">Order Tracking</h4>
                        <p class="text-slate-500 text-sm">Real-time updates on your order status and delivery progress.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="text-slate-500 text-lg">
                Something great is coming - <span class="text-slate-700 font-medium">stay tuned</span>
              </div>
            </div>
          </div>
        </div>
      `
    };

    function hideLoader() {
      const loader = document.getElementById("loader");
      if (loader) {
        loader.classList.add("hidden");
        setTimeout(() => {
          loader.remove();
        }, 500);
      }
    }

    async function loadLayoutAndTheme() {
      // Show loader for at least 2 seconds for a good user experience
      const startTime = Date.now();
      const minLoadTime = 2000;

      try {
        const userRes = await fetch(`${API}/find?collection=users&username=${encodeURIComponent(sellerParam)}`);
        const userData = await userRes.json();
        const seller = userData[0];

        const container = document.getElementById("layoutContainer");

        // Ensure minimum load time
        const elapsed = Date.now() - startTime;
        const remainingTime = Math.max(0, minLoadTime - elapsed);
        
        await new Promise(resolve => setTimeout(resolve, remainingTime));

        if (!seller) {
          hideLoader();
          setTimeout(() => {
            container.innerHTML = ErrorPages.shopNotFound(sellerParam);
          }, 300);
          return;
        }

        const isSeller = seller.role && (
          seller.role === "seller" || 
          seller.role.startsWith("seller") || 
          seller.role === "seller1" || 
          seller.role === "seller2" || 
          seller.role === "seller3"
        );

        if (!isSeller) {
          hideLoader();
          setTimeout(() => {
            container.innerHTML = ErrorPages.shopNotFound(sellerParam);
          }, 300);
          return;
        }

        const layoutHTML = seller.layoutHTML;
        const theme = seller.customTheme || {};

        if (!layoutHTML) {
          hideLoader();
          setTimeout(() => {
            container.innerHTML = ErrorPages.noLayout(sellerParam);
          }, 300);
          return;
        }

        window.__SHOP_DATA__ = {
          sellerParam,
          isOwner,
          API,
          theme
        };

        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = layoutHTML;

        const scripts = Array.from(tempDiv.querySelectorAll("script"));
        scripts.forEach(s => s.remove());

        hideLoader();
        
        setTimeout(() => {
          container.innerHTML = tempDiv.innerHTML;

          scripts.forEach(script => {
            const newScript = document.createElement("script");
            if (script.src) {
              newScript.src = script.src;
            } else {
              newScript.textContent = script.textContent;
            }
            for (const attr of script.attributes) {
              newScript.setAttribute(attr.name, attr.value);
            }
            document.body.appendChild(newScript);
          });
        }, 300);

      } catch (err) {
        console.error("Failed to load layout or theme:", err);
        
        // Ensure minimum load time even on error
        const elapsed = Date.now() - startTime;
        const remainingTime = Math.max(0, minLoadTime - elapsed);
        
        await new Promise(resolve => setTimeout(resolve, remainingTime));
        
        hideLoader();
        
        setTimeout(() => {
          const container = document.getElementById("layoutContainer");
          container.innerHTML = ErrorPages.maintenanceMode();
        }, 300);
        
        setTimeout(() => {
          window.location.reload();
        }, 30000);
      }
    }

    window.addEventListener("DOMContentLoaded", loadLayoutAndTheme);
  </script>

</body>
</html>